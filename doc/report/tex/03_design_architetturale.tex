\section{Design architetturale}

% questa sezione deve essere sufficiente per uno sviluppatore per giungere ad un sistema che è organizzato come il nostro

% (architettura complessiva, descrizione di pattern architetturali usati, componenti del sistema distribuito, scelte tecnologiche cruciali ai fini architetturali -- corredato da pochi ma efficaci diagrammi)

% Ricordate che una scelta architetturale può ritenersi giustificata o meno solo a fronte dei requirement che avete indicato; viceversa, ogni requirement "critico" dovrebbe influenzare qualcuna della scelte architetturali effettuate e descritte.
% L'architettura deve spiegare quali sono i sotto-componenti del sistema (da 5 a 15, diciamo), ognuno cosa fa, chi parla con chi e per dirsi cosa -- i diagrammi aiutano, ma poi la prosa deve chiaramente indicare questi aspetti.

Il gruppo ha scelto di lasciare la libreria non vincolata da dipendenze esterne oltre alla scelta del linguaggio Scala, dettata dai requisiti.
%
Non sono infatti state utilizzate librerie esterne se non quelle per il testing automatizzato.

Nel descrivere il design architetturale nelle sotto-sezioni seguenti, viene prima effettuata un'analisi del dominio, successivamente si passa alla descrizione dei pattern architetturali utilizzati.

\subsection{Analisi del dominio}
% requirements, organizzazione del model
L'analisi dei giochi da tavolo ha evidenziato la presenza costante di una divisione in aspetti intensionali e estensionali all'interno della descrizione di un gioco.
%
\paragraph{Aspetti intensionali}
% Game Description, RuleSet, BoardStructure (?)
\paragraph{Aspetti estensionali}
% Game, State, Board
%

\paragraph{Aspetti comuni dei giochi da tavolo}
% Turni
% Giocatori
% Condizioni di terminazione

\subsection{Pattern architetturali}
% descrizione di pattern architetturali usati, MVC
Data la natura del progetto è risultato necessario fornire delle astrazioni ben consolidate.
%
In particolare, per applicazioni che si basano sull'interazione utente, il pattern \textbf{MVC} è uno dei più noti e flessibili.

% MVC
%Perché, analisi del problema
La separazione delle responsabilità fra i vari componenti è uno dei motivi principali per cui è stato scelto questo pattern: è infatti possibile per un utente della libreria descrivere totalmente un gioco senza fare alcun riferimento alla sua rappresentazione, e solo successivamente collegare ad esso interazione e visualizzazione.
%
Questo è di particolare importanza in una libreria come SBAGS in quanto diversi tipi di interfaccia potrebbero essere necessari per diversi tipi di giochi, e correlare presentazione a modello lo renderebbe più complesso e dispendioso.

Un'ulteriore motivazione risiede nell'abilitare la possibilità di fornire più modalità di visualizzazione del gioco e di interpretazione dell'input utente che possano essere direttamente utilizzabili dagli utenti della libreria. 

\subsection{Architettura complessiva}
%In quale modo
% 0. architettura complessiva, -- model, controller & subcontoller, view & subView:
L'interpretazione del pattern MVC adottata in questo progetto è basata su gerarchie di controller e di view: per ogni fase dell'applicazione - e.g menu, partita in corso - sono presenti diverse coppie di view e controller che gestiscono la specifica situazione.
%
Questi subview e subcontroller sono creati e gestiti dalla \texttt{View} e dal \texttt{Controller} principali, che orchestrano i cambi di scena.

\subsubsection{Avanzamento delle fasi dell'applicazione}
% 1. class diagram
Il main, tramite la \texttt{View} principale, genera le \texttt{SubView} a cui associa i vari \texttt{SubContoller}.
I \texttt{SubContoller} incapsulano la logica per passare da una \texttt{SubView} all'altra e di conseguenza da una fase dell'applicazione ad un'altra.

\subsubsection{Interazioni MVC}
% 2. interazione C - V con registrazione/deregistrazione dei listener
In fase di definizione, ogni \texttt{SubView} specifica il proprio tipo di listener (\texttt{SubContoller}).
%
I listener, dopo essere stati aggiunti, vengono notificati seguendo il pattern \textbf{Observer}, in base agli eventi che accadono alla relativa \texttt{SubView}.
% 3. interazione in game -> scambio di messaggi tra GameController e GameView (+ model) -> sequence diagram
Alcuni \texttt{SubContoller}, in particolare quelli che gestiscono le interazioni di gioco sono in grado di gestire l'interazione con il \texttt{model}: dato un evento, il listener è in grado di richiamare metodi del model per far avanzare lo stato della partita.
%
Il model può rispondere con un nuovo stato o con un errore, in entrambi i casi il \texttt{SubContoller} inoltra il messaggio alla \texttt{SubView} per mostrare a schermo l'avanzamento o l'errore.
%% grafico
%% plant